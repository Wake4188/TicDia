<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta http-equiv="Content-Language" content="en" />

  <!-- Google Analytics - Load on user interaction to reduce initial JS -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    
    // Defer GA loading until user interacts or after 5 seconds
    var gaLoaded = false;
    function loadGA() {
      if (gaLoaded) return;
      gaLoaded = true;
      var script = document.createElement('script');
      script.src = 'https://www.googletagmanager.com/gtag/js?id=G-6HFC6Q72F9';
      script.async = true;
      document.head.appendChild(script);
      gtag('js', new Date());
      gtag('config', 'G-6HFC6Q72F9');
    }
    
    // Load on first interaction
    ['mousedown', 'keydown', 'touchstart', 'scroll'].forEach(function(e) {
      document.addEventListener(e, loadGA, { once: true, passive: true });
    });
    
    // Fallback: load after 5 seconds if no interaction
    setTimeout(loadGA, 5000);
  </script>

  <!-- PWA and App Identity -->
  <title>TicDia - Discover Wikipedia</title>
  <meta name="description"
    content="Discover Wikipedia articles in a modern, engaging TikTok-style format. Learn something new every day with TicDia - ad-free educational content." />
  <meta name="author" content="TicDia" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="robots" content="index, follow" />
  <link rel="canonical" href="https://ticdia.vercel.app/" />

  <!-- SEO and Social Media -->
  <meta name="keywords"
    content="wikipedia, learning, education, articles, discovery, knowledge, tiktok-style, vertical feed" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://w-810266.vercel.app/" />
  <meta property="og:title" content="TicDia - Discover Wikipedia in TikTok Style" />
  <meta property="og:description"
    content="Experience Wikipedia articles in a TikTok-style vertical feed. Educational, fast, and distraction-free learning." />
  <meta property="og:image" content="/og-image.svg" />

  <!-- Twitter Cards -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="TicDia - Discover Wikipedia" />
  <meta name="twitter:description" content="Learn while you scroll with TikTok-style Wikipedia articles." />

  <!-- Mobile app meta tags -->
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="theme-color" content="#FE2C55" />

  <!-- Preconnect to critical origins (max 4) -->
  <link rel="preconnect" href="https://cdn.gpteng.co">
  <link rel="preconnect" href="https://en.wikipedia.org" crossorigin>
  <link rel="preconnect" href="https://upload.wikimedia.org">
  <link rel="preconnect" href="https://rtuxaekhfwvpwmvmdaul.supabase.co">
  
  <!-- DNS prefetch for additional origins -->
  <link rel="dns-prefetch" href="//www.googletagmanager.com">
  <link rel="dns-prefetch" href="//dictionaryapi.com">

  <!-- Critical CSS for initial paint - Enhanced for CLS prevention -->
  <style>
    *,
    *::before,
    *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html,
    body {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
      background-color: #0a0a0f;
      color: #f5f5f5;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
      overflow-x: hidden;
      /* Prevent CLS by establishing dimensions early */
      contain: size layout style;
    }

    #root {
      min-height: 100vh;
      width: 100%;
      display: flex;
      flex-direction: column;
      /* Critical: reserve space to prevent layout shifts */
      contain: layout style;
    }

    /* Prevent layout shifts for images */
    img,
    video {
      max-width: 100%;
      height: auto;
      display: block;
      /* Prevent reflow during load */
      content-visibility: auto;
    }

    /* Critical: Fixed loading skeleton with reserved dimensions */
    .loading-skeleton {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: linear-gradient(90deg, #1a1a1a 25%, #2a2a2a 50%, #1a1a1a 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      z-index: 9999;
    }

    @keyframes shimmer {
      0% {
        background-position: 200% 0;
      }

      100% {
        background-position: -200% 0;
      }
    }

    /* Prevent FOUC (Flash of Unstyled Content) */
    .article-section {
      contain: layout style paint;
      content-visibility: auto;
      contain-intrinsic-size: 100vw 100vh;
    }
  </style>

  <!-- Preload polyfill for CSS loading -->
  <script>
    !function (e) { "use strict"; var t = function (t, n, r) { function o(e) { return i.body ? e() : void setTimeout(function () { o(e) }) } function a() { d.addEventListener && d.removeEventListener("load", a), d.media = r || "all" } var l, i = e.document, d = i.createElement("link"); if (n) l = n; else { var s = (i.body || i.getElementsByTagName("head")[0]).childNodes; l = s[s.length - 1] } var u = i.styleSheets; d.rel = "stylesheet", d.href = t, d.media = "only x", o(function () { l.parentNode.insertBefore(d, n ? l : l.nextSibling) }); var f = function (e) { for (var t = d.href, n = u.length; n--;)if (u[n].href === t) return e(); setTimeout(function () { f(e) }) }; return d.addEventListener && d.addEventListener("load", a), d.onloadcssdefined = f, f(a), d }; "undefined" != typeof exports ? exports.loadCSS = t : e.loadCSS = t }("undefined" != typeof global ? global : this);
  </script>

  <!-- Icons for mobile and desktop -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32px32px-v2.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16px16px-v2.png">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- Custom Font -->
  <style>
    @font-face {
      font-family: 'OldNewspaper';
      src: url('/fonts/OldNewspaperTypes.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }
  </style>

  <!-- Google Fonts - Non-blocking async load with preload -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap"></noscript>

  <!-- Remove duplicate preconnects - consolidated above -->

</head>

<body>
  <!-- Initial content serves as early LCP candidate while JS loads -->
  <div id="root" role="main">
    <div style="min-height:100vh;display:flex;align-items:center;justify-content:center;background:#0a0a0f;">
      <p style="font-size:1.25rem;color:#a0a0a0;text-align:center;max-width:600px;padding:2rem;line-height:1.6;">
        Loading knowledge...
      </p>
    </div>
  </div>
  <noscript>
    <div
      style="text-align: center; padding: 50px; font-family: system-ui, sans-serif; background: #0a0a0f; color: #f5f5f5; min-height: 100vh;">
      <h1 style="margin-bottom: 20px; font-size: 2rem;">TicDia â€” Discover Wikipedia</h1>
      <p style="font-size: 1.1rem; line-height: 1.6;">Please enable JavaScript to use TicDia and discover Wikipedia
        articles in an engaging format.</p>
    </div>
  </noscript>
  <script src="https://cdn.gpteng.co/gptengineer.js" type="module" defer></script>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>